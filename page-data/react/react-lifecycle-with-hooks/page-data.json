{"componentChunkName":"component---src-templates-blog-post-js","path":"/react/react-lifecycle-with-hooks/","result":{"data":{"site":{"siteMetadata":{"title":"Memory !== Record","author":"Ayaan","siteUrl":"https://alpaca92.github.io","comment":{"disqusShortName":"","utterances":"Alpaca92/alpaca92.github.io"},"sponsor":{"buyMeACoffeeId":"ayaan92"}}},"markdownRemark":{"id":"2b45dee0-a56c-5283-855d-9b4ef2ecc36b","excerpt":"리엑트를 사용하면서 당연하게 사용해왔던 훅(hooks)들이 정확히 어떤 시점에서 실행이되고 어떤상황에서 쓰여야되는지는 잘 몰랐던 것 같다 이참에 이를 확실히 정리하고 기초를 다지기위해 이렇게 글로써 정리를 하려한다 리엑트 훅 훅이 어떤 기능을 하는지 알아가기 전에 훅이 무엇인지 정확하게 짚고 넘어갈 필요가 있다 Hooks are a new addition in React 16.8. They let you use state and other React features without writing a…","html":"<p>리엑트를 사용하면서 당연하게 사용해왔던 훅(hooks)들이 정확히 어떤 시점에서 실행이되고 어떤상황에서 쓰여야되는지는 잘 몰랐던 것 같다</p>\n<p>이참에 이를 확실히 정리하고 기초를 다지기위해 이렇게 글로써 정리를 하려한다</p>\n<h1 id=\"리엑트-훅\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EC%97%91%ED%8A%B8-%ED%9B%85\" aria-label=\"리엑트 훅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리엑트 훅</h1>\n<p>훅이 어떤 기능을 하는지 알아가기 전에 훅이 무엇인지 정확하게 짚고 넘어갈 필요가 있다</p>\n<blockquote>\n<p>Hooks are a new addition in React 16.8. They let you use state and other React features without writing a class.</p>\n</blockquote>\n<p>훅은 간단히 말하면 상태(state) 혹은 리엑트의 다른 기능을 클래스로 작성하지 않고 사용하기 위해 탄생했다</p>\n<blockquote>\n<p>There are no plans to remove classes from React. … Hooks don’t replace your knowledge of React concepts. Instead, Hooks provide a more direct API to the React concepts you already know: props, state, context, refs, and lifecycle. As we will show later, Hooks also offer a new powerful way to combine them.</p>\n</blockquote>\n<p>하지만 리엑트는 공식적으로 클래스형 개발방식을 리엑트 내에서 제거할 생각이 없다고 말한다</p>\n<p>그렇기 때문에 우리는 클래스로 작성된 리엑트에 대해 좀 더 깊이 알 필요가 있다는 점을 알 수 있다</p>\n<h2 id=\"그래서-훅은-뭔가요\" style=\"position:relative;\"><a href=\"#%EA%B7%B8%EB%9E%98%EC%84%9C-%ED%9B%85%EC%9D%80-%EB%AD%94%EA%B0%80%EC%9A%94\" aria-label=\"그래서 훅은 뭔가요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>그래서 훅은 뭔가요?</h2>\n<blockquote>\n<p>Hooks are functions that let you “hook into” React state and lifecycle features from function components.</p>\n</blockquote>\n<p>훅은 함수 컴포넌트에서 react state와 lifecycle을 연동(hook into)할 수 있게 해주는 함수다</p>\n<h2 id=\"훅의-사용-규칙\" style=\"position:relative;\"><a href=\"#%ED%9B%85%EC%9D%98-%EC%82%AC%EC%9A%A9-%EA%B7%9C%EC%B9%99\" aria-label=\"훅의 사용 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>훅의 사용 규칙</h2>\n<ol>\n<li>최상위(at the top level)에서만 훅을 호출해야 한다<br />당연히 반복문, 조건문, 함수내에서 훅을 실행하면 안된다</li>\n<li>React 함수 컴포넌트 내에서만(혹은 커스텀 훅 내에서) 훅을 호출해야 한다</li>\n</ol>\n<h1 id=\"라이프사이클-메서드와-훅\" style=\"position:relative;\"><a href=\"#%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4-%EB%A9%94%EC%84%9C%EB%93%9C%EC%99%80-%ED%9B%85\" aria-label=\"라이프사이클 메서드와 훅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>라이프사이클 메서드와 훅</h1>\n<blockquote>\n<p>The Effect Hook, useEffect, adds the ability to perform side effects from a function component. It serves the same purpose as componentDidMount, componentDidUpdate, and componentWillUnmount in React classes, but unified into a single API.</p>\n</blockquote>\n<p><code class=\"language-text\">useEffect</code>는 함수 컴포넌트 내에서 react class의 <code class=\"language-text\">componentDidMount</code>, <code class=\"language-text\">componentDidUpdate</code>, <code class=\"language-text\">componentWillUnmount</code>을 하나의 API로 통합된 것이다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 741px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAceiRR//xAAXEAADAQAAAAAAAAAAAAAAAAAAESBB/9oACAEBAAEFAoxH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExEBH/2gAIAQEAAT8hkHl6MMf/2gAMAwEAAgADAAAAEOw//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExUUH/2gAIAQEAAT8QKCJR6VMCvIq7mLE0RWHrAHF6n//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"라이프 사이클\"\n        title=\"라이프 사이클\"\n        src=\"/static/3c2758d452f02b806ac1e606157e1729/23313/lifecycle_01.jpg\"\n        srcset=\"/static/3c2758d452f02b806ac1e606157e1729/f93b5/lifecycle_01.jpg 300w,\n/static/3c2758d452f02b806ac1e606157e1729/b4294/lifecycle_01.jpg 600w,\n/static/3c2758d452f02b806ac1e606157e1729/23313/lifecycle_01.jpg 741w\"\n        sizes=\"(max-width: 741px) 100vw, 741px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위 이미지에서 알 수 있듯이 리엑트는 크게 <code class=\"language-text\">생성될 때</code>, <code class=\"language-text\">업데이트 할 때</code>, <code class=\"language-text\">제거할 때</code>, 세 가지 상황을 기준으로 나뉜다 <a href=\"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">이미지 출처</a></p>\n<blockquote>\n<p><strong>👀 근데 리엑트는 언제 업데이트 될까?</strong></p>\n<p>리엑트가 업데이트 되는 경우는</p>\n<ol>\n<li><code class=\"language-text\">props</code>가 바뀔 때</li>\n<li><code class=\"language-text\">state</code>가 바뀔 때</li>\n<li><code class=\"language-text\">부모 컴포넌트(parent component)</code>가 리렌더링 될 때</li>\n</ol>\n<p>이렇게 세 가지 경우다</p>\n</blockquote>\n<p>위 라이프 사이클 이미지에서 알 수 있듯이 훅과 라이프 사이클은 상호 보완적이지만 서로를 완벽하게 커버해주지는 못한다</p>\n<p>아래의 표를 확인해보도록 하자</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">구분</th>\n<th align=\"center\">Lifecycle methods</th>\n<th align=\"center\">Lifecycle Hooks</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">도입시점</td>\n<td align=\"center\">초기 리엑트 버전에서 소개 됨</td>\n<td align=\"center\">2018년에 새롭게 등장함</td>\n</tr>\n<tr>\n<td align=\"center\">ECMAScript</td>\n<td align=\"center\">ES5</td>\n<td align=\"center\">ES6</td>\n</tr>\n<tr>\n<td align=\"center\">기반</td>\n<td align=\"center\">클래스형 컴포넌트</td>\n<td align=\"center\">함수형 컴포넌트</td>\n</tr>\n<tr>\n<td align=\"center\">constructor 유무</td>\n<td align=\"center\">초기화 시 반드시 사용</td>\n<td align=\"center\">사용하지 않음</td>\n</tr>\n<tr>\n<td align=\"center\">State 업데이트 방법</td>\n<td align=\"center\">this로 바인드하여 업데이트</td>\n<td align=\"center\">setter 함수로 업데이트</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"라이프-사이클-메서드\" style=\"position:relative;\"><a href=\"#%EB%9D%BC%EC%9D%B4%ED%94%84-%EC%82%AC%EC%9D%B4%ED%81%B4-%EB%A9%94%EC%84%9C%EB%93%9C\" aria-label=\"라이프 사이클 메서드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>라이프 사이클 메서드</h2>\n<p>라이프 사이클 메서드 중 중요한 메서드들을 살펴보도록 하자</p>\n<h3 id=\"render\" style=\"position:relative;\"><a href=\"#render\" aria-label=\"render permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>render()</h3>\n<p><code class=\"language-text\">render()</code>메서드는 클래스형 컴포넌트 안에서만 사용되며, 이는 컴포넌트의 UI 렌더링을 처리한다</p>\n<p>이 메서드는 <code class=\"language-text\">생성될 때(mounting)</code>, <code class=\"language-text\">업데이트 할 때(updating)</code> 실행되며 UI로 보여지는 JSX를 리턴한다</p>\n<p><code class=\"language-text\">render()</code> 메서드 안에서는 <code class=\"language-text\">state</code>를 수정할 수 없다는 점이 특징이다</p>\n<h3 id=\"componentdidmount\" style=\"position:relative;\"><a href=\"#componentdidmount\" aria-label=\"componentdidmount permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>componentDidMount()</h3>\n<p>컴포넌트가 생성이 되었다면 <code class=\"language-text\">componentDidMount()</code>가 실행된다</p>\n<p>이 안에서는 data fetching API를 불러오는 등을 하기에 적합한 메서드다</p>\n<p>이 안에서는 <code class=\"language-text\">state</code>를 변경할 수 있지만 성능 저하가 발생할 수 있으므로 주의하여야 한다</p>\n<h3 id=\"componentdidupdate\" style=\"position:relative;\"><a href=\"#componentdidupdate\" aria-label=\"componentdidupdate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>componentDidUpdate()</h3>\n<p>이 메서드는 업데이트가 발생하는 즉시 호출된다</p>\n<p>일반적으로는 <code class=\"language-text\">props</code>나 <code class=\"language-text\">state</code>의 변경에 대응하여 DOM을 업데이트하는 메서드라고 생각하면 된다</p>\n<p><code class=\"language-text\">props</code>나 <code class=\"language-text\">state</code>의 변화를 확인할 수 있는 상태에서 <code class=\"language-text\">setState()</code>를 사용하는 것을 권장한다<br />(잘못된 사용으로 무한루프에 빠질 수 있기 때문에 조심해야 한다)</p>\n<h3 id=\"componentwillunmount\" style=\"position:relative;\"><a href=\"#componentwillunmount\" aria-label=\"componentwillunmount permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>componentWillUnmount()</h3>\n<p>컴포넌트가 제거될 때 이 메서드가 호출된다</p>\n<p>타이머의 제거, 저장소의 캐시 제거, API 호출의 취소 등 cleanup action을 하기 적합한 메서드다</p>\n<br />\n<p>훅에 대해서는 따로 사용법을 정리하지는 않겠다</p>\n<p><a href=\"https://alpaca92.github.io/react/React-Hooks-%EC%82%AC%EC%9A%A9-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90%EB%93%A4\">그보다 훅을 사용하면서 주의해야할 점</a>에 대해 정리해둘 예정이니 이를 확인해보기 바란다</p>\n<h2 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>*references</h2>\n<ol>\n<li><a href=\"https://reactjs.org/docs/hooks-intro.html\">Introducing Hooks</a></li>\n<li><a href=\"https://krpeppermint100.medium.com/js-useeffect%EB%A5%BC-%ED%86%B5%ED%95%9C-react-hooks%EC%9D%98-lifecycle-%EA%B4%80%EB%A6%AC-3a65844bcaf8\">[JS]useEffect를 통한 React Hooks의 Lifecycle 관리</a></li>\n<li><a href=\"https://react.vlpt.us/basic/25-lifecycle.html\">리엑트 핸드북: 25. LifeCycle Method</a></li>\n<li><a href=\"https://medium.com/crossml/react-lifecycle-methods-vs-hooks-6acf5e049f64\">React - Lifecycle Methods vs Hooks</a></li>\n</ol>","frontmatter":{"title":"React lifecycle vs hooks","date":"October 04, 2022"}}},"pageContext":{"slug":"/react/react-lifecycle-with-hooks/","previous":{"fields":{"slug":"/react/react-flux-pattern/"},"frontmatter":{"title":"React Flux pattern"}},"next":{"fields":{"slug":"/react/react-hooks-사용-시-주의할-점들/"},"frontmatter":{"title":"React Hooks 사용 시 주의할 점들"}}}}}